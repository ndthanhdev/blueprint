# Blockchain
Blockchain là một digital distributed ledger (“sổ cái” điện tử phân tán) có đặc tính chỉ có thể thêm vào. Nó được tạo ra và duy trì bởi mạng lưới những người dử dụng blockchain. Lần đầu tiên nó được mô tả là bởi Satoshi Nakamoto vào năm 2008 (Nakamoto, S.: Bitcoin: A peer-to-peer electronic cash system. Technical report, Bitcoin org, 2008.). Satoshi chủ yếu thiết kế Blockchian để trở thành tiền đề cho công nghệ tiền mã hóa như Bitcoin. Ý tưởng cốt lõi của Blockchain là tạo một kênh giao dịch tài sản giữa hai bên một cách nhanh chóng, tiết kiểm, an toàn, ổn định, minh bạch và đáng tin cậy mà không thông qua trung gian, tín dụng, công chứng. Tài sản trong kênh giao dịch giữa hai bên là dữa liệu đảm bảo cho sự tin tưởng giữa hai bên số có thể là tiền, công chứng, tài liệu, tài sản, hợp đồng... Ví dụ giao dịch tài sản có thể bị đánh thuế như trả lương, hóa đơn.
Blockchain dựa trên một digital distributed ledger (“sổ cái” điện tử phân tán), chỉ có thể thêm vào bằng những transaction (giao dịch) được tạo ra bởi mạng lưới những người sử dụng và duy trì blockchain. Bất kì transaction nào từ một thành viên đều phải được chứng thực bởi phần lớn những thành viên khác trong mạng lưới để thay đổi dữ liệu bên trong blockchain. Các transaction này được nối thành chuỗi với nhau và được thêm vào blockchain, nơi chúng khổng thể bị xóa bỏ. Blockchain không thuộc sở hữu của một chủ thể mà thay vào đó nó được phân phối tới các máy tính bên trong mạng lưới (node). Nhờ vậy tất các các máy trong mạng giữa bản sao giống nhau của sổ cái và nhờ thế nó có thể được xem, được xác minh và xác thực bởi bất kì ai trong mạng và bất kì lúc nào.
Blockchain có thể tồn tại dưới dạng private (riêng tư) hoặc public (công khai). Public Blockchain (Blockchain công khai) cho phép mọi người có thể dùng nó. Một ví dụ là bitcoin. Trong khi đó Private Blockchain (Block chain riêng)  yêu cầu người dùng phải được xác thực và thường được tạo ra và chỉ được sử dụng bên trong một tổ chức nhất định. Ví dụ một công ty chuỗi cung ứng có thể sử dụng private blockchain cho các giao dịch của họ.
Người dùng blockchain có thể là một cá nhân đam mê công nghệ cho đến các tập đoàn tài chính và thương mại. Theo một khảo sát bởi World Economic Forum's (WCF - diễn đàn kinh tế thế giới) Global Ageda Council, hiện tại có khoảng 20 tỉ USD được trữ trong blockchain. Nhưng WCF nhận định rằng giá trị đó sẽ còn tăng nhiều hơn nữa. Hơn thế nữa, blockchain đã trở nên rất nổi tiếng trong các ngành tài chính, kinh tế và tăng trưởng mạnh ở các quốc gia đang phát triển.
Các tập đoàn tài chính như Nasdaq, Axoni, Deloitte, Finetch, The Linux Foundation, IBM đang thúc đẩy sự an toàn, ổn định, minh bạch và khả năng loại bỏ bên trung gian cho lợi thế của họ. Nasdaq đang sử dụng blockchain để ghi lại tất cả các giao dịch riêng tư một cách an toàn. Deloitte đang làm việc với các startup và khách để phát triển hệ thống định danh thông minh cho khách hàng là các ngân hàng. Linux Foundation có một dự án hợp tác gọi là Hyperledger cho các doanh nghiệp. IBM có nhiều dự án mã nguồn mở nhằm xây dựng sự chuẩn hóa cho blockchain trong công nghiệp. Công ty khởi nghiệp Finetch được hỗ trợ bởi 40 ngân hàng toàn cầu đang phát triển một kiến trúc chuẩn cho sổ cái private blockchain nhằm giúp cắt giảm chi phí và thời gian giải quyết các giao dịch.
Trong lĩnh vực thương mại, Everledger và Factom đang làm việc tích cực với blockchain. Everledger đang tập trung vào việc định danh và hợp pháp hóa các vật phẩm dựa trên blockchain. Tương tự, Factom cũng đang ứng dụng blockchain trong mảng bảo mật dữ liệu. Họ nhận tài trợ từ sở nội vụ Hoa Kỳ để thu thập dữ liệu từ các thiết bị ngoại vi. Hơn nữa, họ cũng làm việc cho nhiều dự án ở Trung Quốc để xây dựng một thành phố thông minh. Những thành phố đó tích hợp blockchain vào dịch vụ cung cấp điện, dịch vụ công chứng, giao dịch tài chính để đảm bảo sự chính xác của dữ liệu.
Ở các nước đang phát triển, blockchain có thể được sử dụng để chuyển tiền nhanh chóng từ nước ngoài. Mặc khác, nó có thể giúp thực hiện các giao dịch đáng tin cậy. Ngân Hàng Thế Giới và Liên Hợp Quốc đã khởi xướng các dự án khác nhau để đinh danh kỹ thuật số được sử dụng cho đăng ký đất đai và tài chính cho doanh nghiệp vừa và nhỏ. Bên cạnh đó nhiều trường đại học như MIT, Princeton, Berkley đang nghiên cứu và hỗ trợ blockchain. Cũng có một cộng đồng blockchain W3 để đưa định hướng chuẩn hóa cho blockchain như định dạng tin nhắn, public-private blockchain và đánh giá các công nghệ mới liên quan tới block chain.
## Thuật Ngữ
Tiểu mục này giải thích về các thuật ngữ cơ bản được sử dụng trong công nghệ blockchain. Những thuật ngữ này bao gồm Peer-to-peer network (Mạng ngang hàng), block, blockchain, distributed blockchain (blockchain phân tán, phi tập trung) và smart contracts (hợp đồng thông minh).
### Peer-to-Peer network
Peer-to-peer (P2P) là một kiến trúc mạng phân tán nơi mà mỗi bên tham gia (máy tính) chia sẽ tài nguyên phần cứng như khả năng tính toán, lưu trữ, đường truyền với những bên còn lại. Hơn thế nữa, tài nguyên được sử dụng để cung cấp dịch vụ như nội dung, chia sẽ file và sẵn sàn cung cấp tới tất cả các node một cách trực tiếp không cần phải thông qua máy chủ tập trung. Bên cạnh đó, tại một thời điểm một node có thể vừa là bên tiêu thụ vừa là bên cung cấp tài nguyên. Hơn thế nữa, nó cũng được sử dụng cho mục đích ẩn danh, tính toán song song, lưu trữ phan tán, chia sẽ đa phương tiện.
Blockchain sử dụng kiến trúc mạng P2P để đảm bảo tính phân tán, phi tập trung với không một single point of failure (SPOF là một phần của hệ thống nếu nó dừng hoạt động cả hệ thống sẽ dừng hoạt động theo). Có hai kiểu tham gia trong mạng: member peer(thành viên) và validator peer (bên kiểm chứng). Member sử dụng các dịch vụ của blockchain trong khi đó validator xác thực và xác minh các giao dịch mới trong blockchain đó là giá phải trả để blockchain có thể hoạt động. Có một nhóm thành viên tham gia đặc biệt gọi là các miner (thợ mỏ), miner có một bản sao giống nhau của tất cả lịch sử giao dịch trên mạng và có trách nhiệm cụ thể để duy trì và truyền đi các giao dịch mới trên mạng. Miner đầu tiền xác thực thành công một block và truyền nó khắp mạng nhận được một phần thưởng.
### Block
Một block là một đơn vị trong blockchain, thứ tạo nên blockchain và chứa các thông tin transaction (giao dịch). Một Miner thu thập những dữ liệu hợp lệ (transaction) trong khoảng thời gian nhất định để tạo thành một khối và tính toán mã băm (hash). Tuy nhiên, mã băm này phải có định dạng theo quy định, ví dụ mã băm phải có bốn số 0 đứng đầu [TODO: hình dưới]. Để có được loại mã băm cụ thể này, miner phải đoán ngẫu nhiên một số, xuất kết quả hash với 4 số 0 đầu. Số ngẫu nhiên này được gọi là số được sử dụng một lần (nonce) và block chưa số này gọi là signed block, block không chứa gọi là unsigned. Quá trình tìm ra số nonce gọi là quá trình đào mỏ.
Một block mẫu được hiện ở hình trên, nơi mà một block được đánh một số, nonce, data và hash. Số thự tự #1 là độc nhất của block đó và Nonce là 72608, một số ngẫu nhiên được đoán để cho ra chính xác định dạng hash. Cuối cùng, data là dữ liệu của user trong trường hợp này là rỗng và Hash là chữ ký kỹ thuật số lên của data.
### Blockchain
Blockchain là một cấu trúc dữ liệu với các danh sách liên kết của các con trỏ hash. Nó là một chuỗi của các block nơi mỗi block chứa một con trỏ hash trỏ tới block trước đó. Con trỏ hash này cho phép xác minh và xác thực digest (TODO: giải thích) dữ liệu trước đó. Nếu bất kì giá trị nào trong chuỗi bị thay đổi thì digest cũng thay đổi và con trỏ hash của block tiếp theo cũng bị thay đổi. Do vậy, nó tao ra sự giả mạo dễ dàn bị phát hiện. Hơn thế nữa, có thể duyệt con trỏ hash ngược lại tới khi gặp block đầu tiên, genesis block.
TODO: hình
Một ví dụ blockchain được mô tả ở hình trên nơi mà  2 block được nối với nhau. Ở đây, mỗi block có một số thứ tự, nonce, data, hash của block trước và hash của block hiện tại. Hơn thế nữa, Block #1 là genesis block của blockchain và hash của block trước block 1 là null (000000000000000000000000000000000000) số nguyên trong khi Block #2 là block thứ 2 của blockchain có con trỏ hash trỏ tới block trước nó.
### Distributed blockchain
Distributed Blockchain (Blockchain phân tán) là block chain được phân tán qua các node blockchain P2P nơi mà mỗi node giữa một bản sao giống nhau của blockchain. Do vậy, nếu một node trong blockchain bị thay đổi và đào lại, dẫn tới kết quả là hash trở nên khác với những node khác. Như một kết quả tất yếu, transaction này sẽ bị vô hiệu bởi những node khác. Tuy nhiên, theo lý thuyết thì một miner có thể thay đổi blockchain và đào lại tất cả các hash trên mạng nếu nó có sức mạnh tính toán mạnh hơn tất cả các miner khác cộng lại.
### Smart contracts
Smart contracts (Hợp đồng thông minh) tự thực hiện các chương trình dựa trên điều kiện được định nghĩa trước bởi lập trình viên. Những smart contract có khả năng tạo điều kiện, thực thi và thực thi các thỏa thuận giữa các bên sử dụng blockchain. Không như các hợp đồng truyền thống, nơi cần có một bên thức ba như (ngần hàng, công chứng), smart contract mở ra khả năng thực hiện hợp đồng giữa các bên một cách độc lập và ẩn danh với chi phí rẻ. Ví dụ, một người có thể thanh toán tiền phòng tự động vào cuối mỗi tháng mà không cần thông qua ngân hàng.
Smart contract có rất nhiều ứng dụng như thực hiện giao dịch, vay nợ, chứng khoáng, giao dịch trái phiếu trên thị trường. Hơn nữa, nó có thể được sử dụng để thực hiện bỏ phiếu tự động minh bạch hoặc hệ thống công chứng tự động. Trong lĩnh vực này, những công ty như Ethereum, Codius đang cung cấp giải pháp smart contract hỗ trợ việc hiện thực các ứng dụng được nêu trên.
## Mã Hóa
Tiểu mục này mô tả về các công nghệ mã hóa cơ bản được sử dụng trong blockchain. Chúng là hàm băm mật mã, con trỏ hash, chữ ký số và cây Merkle.
### Cryptographic hash function (Hàm băm mật mã học)
Cryptographic hash function (Hàm băm mật mã học) là một hàm toán học nhận đầu vào một dữ liệu bất kể độ dài và trả ra một kết quả với độ dài cố định gồm các chữ và số. Giá trị trả ra này được gọi là hash hay digest, digital fingerprint, checksum. Hơn nữa, giá trị trả ra có độ dài cố định và không bị trùng. Hàm luôn tạo ra hash giống nhau với dữ liệu đầu vào giống nhau mặc cho thử lại bao nhiêu lần đi nữa. Hash không thể bị dịch ngược để lấy giá trị đầu vào và vì thế, nó có thể được sử dụng để kiểm tra tính toàn vẹn của dữ liệu. Nhờ đó, nó cũng được biết đền như là hàm hash một chiều.
Hàm băm có ba thuộc tính chính lần lượt là: collision free, hiding và puzzle friendly. Collision free nghĩa là nó cực kỳ khó để tìm hai tin nhắn có cũng hash. Ví dụ, hash của một chuỗi x và hash của một chuỗi y luôn khác nhau, mặc dù có tính đi tính lại bao nhiêu lần. Hiding nghĩa là nó là điều bất khả thi để tìm giá trị của x từ hash của x và puzzle friendly là độ dễ dàng để tính hash của dữ liệu cho trước.
Blockchain sử dụng Secure Hash Algorithm (SHA) là SHA-2/SHA-256, loại được phát triển bởi cơ quan an nin quốc gia (NSA) trong năm 2001 để thay thế SHA-1 để ngăn chặn tấn công collision free. Lần tấn công SHA-1 được ghi nhận bởi Google, họ đã cung cấp 2 tài liệu có cùng SHA-1 hash. Hơn thế, SHA-2 được sử dụng rộng rãi và cho đến nay chưa có lỗ hổng bảo mật nào được báo cáo. Ví dụ sau đây, một đoạn hash SHA 256 của hello là 2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e73043362938b9824.
### Hash pointer
Hash pointer (Con trỏ hash) là một con trỏ trỏ tới nơi dữ liệu được lưu trữ cùng với digest của data đó. Nói cách khác, nó chỉ là một đoạn hash được sử dụng để tham khảo tới một phần thông tin được biết trước đó, nó còn được dùng để kiểm chứng dữ liệu (dữ liệu có thay đổi hay không). Con trả hash có thể được dùng để nên xây dựng kiến trúc dữ liệu trường hợp này là blockchain, một linked list (danh sách liên kết) của những con trỏ hash hay cây Merkle, một cây nhị phân của con trỏ hash.
### Digital signature
Digital signature (Chữ ký Kỹ thuật số) là một yếu tố khác trong blockchain. Nó sử dụng mã hóa public-key để cung cấp tính toàn vẹn, sự tôn trọng (nghĩa vụ với mỗi tin nhắn được gửi đi và nhận) và tính xác thực về nội dung và ngồn gốc của tin nhắn. Nó có tính chất tương tự như chữ ký tay, chỉ có thể được tạo bởi chủ sở hữu và dễ dàng xác thực bời người khác. Một tin nhắn được ký bởi chữ ký kỹ thuật số có thể được xác thực bởi người khác, nhưng tin nhắn chỉ có thể được ký bởi chủ sở hữu. Bên cạnh điều này, chữ ký kỹ thuật số có thể được tạo ra nhờ mã hóa public key. Mã hóa public key hay mã hóa bất đối xứng sử dụng một cặp khóa là public key và private key. Private key được lưu trữ duy nhất bởi chủ sỡ hữu trong khi public key có thể được phân phối tới bất kỳ ai. Người dùng khác có thể mã hóa tin nhắn của họ gửi cho chủ sở hữu của key bằng các sử dụng public key của người đó và tin nhắn chỉ có thể được giải mã bằng private key của public key đó.
Blockchain có sử dụng chữ ký kỹ thuật số như ECDSA để tạo chữ ký kỹ thuật số. Có trường hợp sử dụng chữ ký kỹ thuật số phổ biến là tạo, ký và xác thực. Secret key (khóa bí mật sk) và public key (khóa công khai pk) được tạo bởi phương thức generateKeys. Sk được giữa bởi chủ sở hữu và pk được phân phát tới các node. Tin nhắn được ký sử dụng sk. Quá trình ký sử dụng sk ký vào tin nhắn để tạo ra chữ ký cho tin nhắn đó. Quá trình xác thực sử dụng pk và chữ ký trong tin nhắn. Do vậy, pk đảm bảo tin nhắn được tạo bởi người ký. Vì thế, pk được sử dụng để định danh trên blockchain.
Sử dụng blockchain phân tán, người dùng không cần cung cấp mã an sinh xã hội, số điện thoại, email tới bất kỳ máy chủ tập trung hay cơ quan thẩm quyền nào. Họ có thể tạo định danh số của chính họ và phát tán pk của họ tới mạng lưới phân tán. Điều này cung cấp tính ẩn danh cho người dùng. Tuy nhiên, trong môi trường blockchain phân tán này tất cả các node có bản sao của mọi giao dịch. Điều này có nghĩa là một node có thể thấy hết lịch sử của mọi giao dịch. Do vậy, một node có thể quan sát lịch sử giao dịch người dùng và có thể có thể liên kết ra hoặc đoán được danh tính thực của họ.
### Merkle tree
Blockchain dùng mạng P2P nơi mà mỗi node có cùng bản sao của dữ liệu và dữ liệu mới phải được lang truyền và xác minh trên khắp mạng. Lang truyền và xác thực data qua mạng P2P thì rất tốn thời gian và chi phí tín toán. Do vậy, Merkle tree (Cây Merkle) được sử dụng thay vì gửi data chỉ chứa hash của data, mỗi node nhận cây và cây được kiểm tra hash tại gốc điều này vẫn đảm bảo tín an toàn và độ hiệu quả lớn hơn cũng như là tín toàn vẹn. Cây Merkle hay cây hash là cây nhị phân của những con trỏ hash, nó đảm bảo tất các các node không bị thiệt hại, không bị thay đổi, hợp pháp và nếu dữ liệu thay đổi trên một node, thay đổi sẽ bị truyền đi hết tất cả các node.
Cây Merkle bao gồm một số lượng lớn các block chứa dữ liệu hoặc giao dịch (xem hình bên dưới). Những khối này tạo thành lá của cây Merkle và các transaction block được nhóm thành các cặp nơi mỗi cặp có con trỏ hash tương ứng điều này tạo ra cấp độ tiếp theo của cây. Hơn nữa, quá trình này được lặp lại cho đến khi khối đạt được như trong hình và khối duy nhất được gọi là gốc hash hay gốc của cây.
TODO: hình
Một mô hình của cây Merkle và các khái niệm cơ bản như làm cách nào mà root hash (gốc hash) được hình thành được mô tả ở hình trên. Nó có 4 transactions TX1, TX2, TX3 và TX4 tại điểm thấp nhất nơi mỗi transaction được chuyển qua một hàm hash để tạo 4 hash duy nhất. Sau đó, cặp hash sau đó được gọp lại và truyền qua hàm hash tạo ra 2 hash duy nhất và sau đó 2 hash đó được gọp lại 1 lần nữa rồi truyền qua hàm hash một lần nữa để tạo ra một hash duy nhất đó chính là gốc của cây Merkle.
Cây Merkle cho phép phát hiện bất kỳ sự thay đổi nào với dữ liệu transaction của block bằng cách đơn giản là chạy quá trình xữ lý giao dịch và so sánh với giá trị hash gốc. Nếu một người dùng cố thay đổi hoặc đổi chỗ transsaction ở gốc, nó sẽ gây hư hỏng cho node ở phía trên và cuối cùng là toàn bộ cây bị hỏng. Nói cách khác, nếu hash của block thay đổi kết quả là block mới trở nên không hợp lý. Bây giờ khối mới này được truyền cho các node khác. Vì dữ liệu này hoàn khác nhau họ có thể dễ dàng so sánh với hash của họ và vô hiệu hóa nó. Vì vậy bất kể thay đổi nào tới cây Merkle kết thúc sẽ dẫn đến sự không thống nhất.
## Distributed Consensus
Distributed Consensus( Sự Đồng Thuận Phân Tán) là xương sống của blockchain. Blockchain sử dụng giao thức distributed consensus để đạt tới thỏa thuận transaction nào sẽ được thêm vào sổ cái. Không một node hoặc người có quyền nào có thể quyết định giao dịch nào sẽ được thêm vào để sổ. Thay vào đó số lượng lớn các node trung thực trong mạng giúp đạt được sự đồng thuận. Giao thức này cho phép kết nối các thiết bị để hoạt động cùng nhau tạo thành một nhóm và trong trường hợp một số node bị lỗi, nó vẫn có thể đạt được sự đồng thuận. Thợ mỏ giải quyết vấn đề toán học phức tạp để đạt được sự đồng thuận. Có những trường hợp khi hai miner có thể giải quyết vấn đề toán học tại cùng một thời điểm. Điều này dẫn đến ngã ba trong blockchain. Trong trường hợp này, nhánh dài nhất của blockchain được chọn và những node khác bị loại bỏ. Do đó, giao thức đảm bảo khả năng chịu lỗi, dự phòng và quản lý phân cấp của giao dịch.
### Proof-of-work
Proof-of-work (pow) lần đầu tiên được giới thiệu vào năm 1999 bởi Miguel Castro và Barbara Liskov là giải pháp cho vấn đề của Byzantine. Các vấn đề chung của Byzantine có thể được mô tả như sau. Một nhóm các tướng lĩnh của quân đội Byzantine bao vây thành phố kẻ thù và được phép giao tiếp với nhau chỉ qua sứ giả. Do đó, để chinh phục trận chiến, họ phải đạt được sự nhất trí về kế hoạch chiến đấu. Tuy nhiên, vấn đề là một hoặc nhiều tướng lĩnh có thể là kẻ phản bội, do đó, họ có thể thua trận. Câu hỏi là có bao nhiêu tướng lĩnh phản bội mà quân đội có và làm sao vẫn hoạt động như một lực lượng thống nhất. Tương tự, trong một hệ thống phân tán, để tìm xem có bao nhiêu nút bị lỗi và vẫn đạt được sự đồng thuận. Các giải pháp cho vấn đề này đã được đề xuất với thuật toán practical Byzantine fault tolerant (PBFT). Thuật toán này đề xuất trao đổi an toàn và nhanh chóng thông điệp chung để đạt được sự đồng thuận. Các thông điệp này được bảo mật, chịu lỗi và có khả năng phục hồi.
Blockchain pow được Satoshi Nakamoto đề xuất lần đầu tiên vào năm 2008
giải quyết vấn đề double-spending. Vấn đề double-spending là trường hợp người dùng cố gắng sử dụng tiền điện tử có sẵn nhiều hơn một lần. Vấn đề này có thể được giải quyết trong một hệ thống phân tán bằng pow việc node dành thời gian tạo ra một hash pow. Biểu mẫu này không thể thay đổi mà không phải làm lại pow. Miễn là phần lớn năng lực tính toán được điều khiển bởi các nút trung thực, họ đạt được thỏa thuận chung tạo thành chuỗi sự đồng thuận trung thực. Chuỗi này dài hơn chuỗi đồng thuận không trung thực. Do đó, các nút trung thực và pow đảm bảo tiền điện tử được tiêu đúng một lần.
Pow giúp đạt được sự đồng thuận và thêm một block vào blockchain. Một khối được thêm vào blockchain sau khi các nút đạt được sự đồng thuận để có được giải pháp ta cần một bài toán phức tạp được giải quyết bằng cách node lặp lại việc đoán ngẫu nhiên. NOde đầu tiên giải quyết vấn đề này và phân tán tới mạng nhận được phần thưởng tài chính trong khi các nút khác cập nhật sổ cái của họ.Giải bài toán này thì khó, nhưng rất dễ dàng cho các nút khác để xác thực đáp án. Nó giống với việc bạn có một khóa số, bạn phải thử đi thử lại để tìm đúng dãy số khóa. Nhưng một khi đã tìm ra chính xác chuỗi số của khóa nó rất dễ cho các người khác để kiểm chứng.
Pow có một số vấn đề đã được biết đến. Ví dụ, rất nhiều nặng lực tính toán bị lãng phí để tìm ra giải pháp đúng dẫn tới hao tốn năng lượng kéo theo chi phí đắt đỏ. Ngoài ra, chỉ các nút có công suất tính toán cao có thể tham gia đào. Kết quả là, chỉ số ít miner mới có thể tham gia vào việc khai thác và do đó làm tăng cơ hội tấn công 51%. Bên cạnh đó, trong tương lai các miner sẽ chỉ nhận được phí giao dịch từ người dùng. Nó sẽ giảm số lượng miner. Sau đó hệ thống trở nên dễ bị tấn công hơn 51%. Một giải pháp thay thế pow là Proof-of-stake.
### Proof-of-stake
Proof-of-stake (pos) là một giải thuật để đạt được sự đồng thuận được đề xuất năm 2012 như một ứng cử viên thay thế pow. Nó được sử dụng để xác nhận một khối giao dịch trong mạng blockchain và có một cơ chế để trừng phạt các nút không theo giao thức đồng thuận. Miner phải đặt cược hoặc đặt cược số lượng tài sản kỹ thuật số xác định trước cho kết quả đồng thuận. Không như pow, thuật toán này chọn ngẫu nhiên một miner từ danh sách thợ mỏ và miner đã được chọn được yêu cầu để giải quyết một vấn đề toán học đơn giản. Sau đó, nếu miner giải quyết thành công vấn đề tiền thắng cược hoặc tiền thưởng được trao cho họ. Nếu không, thợ mỏ tiếp theo được chọn ngẫu nhiên. Do đó, không có phân biệt chủng trong giải quyết vấn đề toán học để đạt lợi ích kinh tế. 
Những lợi thế chính của pos đối với pow như giảm tiêu thụ năng lượng và giảm phân cấp dẫn đến giảm cơ hội tấn công 51%. Bời vì pos chỉ thực hiện một phép toán đơn giản, các miner không cần một máy tính mạnh để tham gia đào. Thay vào đó, một máy tính vừa phải là đủ. Vì vậy, ít năng lượng bị lãng phí hơn và không có sự cạnh tranh khốc liệt về việc xây dựng các node có sức mạnh tính toán lớn để có được hiệu quả kinh tế. Hơn nữa, hầu như bất kỳ nút nào có thể tham gia khai thác. Do đó, pos thụ ít năng lượng hơn và thúc đẩy sự tham gia rộng rãi hơn trong khai thác mỏ, làm tăng sự phân tán của blockchain.
## Kiến Trúc
Kiến trúc tổng quát của blockchain được mô tả trong hình bên dưới. Kiến trúc được chia làm 4 lớp: Ứng dụng, RPC, API, Peer Service và Consensus Layer.
Lớp ứng dụng có những ứng dụng blockchain, chúng cung cấp cho người dùng khả năng tương tác với mạng blockchain. Những ứng dụng blockchain có thể là ví hoặc phần mềm quản lý key, như là ledger wallet, nó cung cấp định danh blockchain cho user bằng cách tạo public/private key, public key được chia sẽ trong mang và private key giữ lại chỉ cho user. Hơn thế nữa, các giao dịch được tạo ra trong lớp này. Transaction chứa chữ ký kỹ thuật số của người gửi, giá trị của transaction và public key của người nhận như trong hình bên dưới. Transaction này được ký bằng private key của người gửi, việc này giúp tạo nên định danh độc nhất cho hash của transaction. Dựa trên mức độ bảo mật được thực hiện bởi người gửi private key có thể được bảo vệ bằng sinh trắc học (vân tay, móng mắt) hoặc mật khẩu. Vì vậy, lớp này một mặt đảm bảo tính toàn vẹn dữ liệu của giao dịch và mặt khác cung cấp sự ẩn danh cho người dùng. Hơn nữa, các private key của người dùng không chứa dữ liệu cá nhân (tên, họ, email, số điện thoại) được chia sẻ trong mạng. 
Các ứng dụng blockchain khác là các ứng dụng web như BitInfoCharts và Info Blockchain cung cấp số liệu thống kê tiền điện tử cũng như giao diện mà bất kỳ người dùng nào cũng có thể truy vấn và xem giao dịch. Bên cạnh đó, người dùng có thể phát triển các ứng dụng blockchain của riêng họ bằng cách sử dụng RPC API Layer. Lớp API RPC là một lớp giao tiếp giữa lớp Ứng dụng và Lớp dịch vụ ngang hàng như trong hình. Nó có các quy tắc giao tiếp và truy cập của blockchain được xác định trước bởi mạng blockchain. Các quy tắc này xác định điểm cuối của cơ sở dữ liệu, cá nhân, mạng, quản trị, số liệu và giao diện API gỡ lỗi của blockchain. Nó cũng thiết lập các quy tắc về API nào được tiếp xúc với Lớp ứng dụng từ Lớp dịch vụ ngang hàng cũng như ai có thể truy cập ứng dụng. Những quy tắc này phụ thuộc vào thiết lập môi trường blockchain, là phát triển hoặc thử nghiệm hoặc sản xuất. Đơn giản như là JSON-RPC API. Do đó, Lớp ứng dụng có thể truy cập những API được Lớp API RPC cho phép. Có những nút đặc biệt được gọi là miner tạo thành Tầng dịch vụ ngang hàng như trong hình.
Lớp dịch vụ ngang hàng là cốt lõi của blockchain thực hiện tất cả các tính toán cần thiết để xác nhận và xác minh các giao dịch và khối. Mỗi nút có bản sao lịch sử giao dịch có thể được xác minh cho đến khi giao dịch đầu tiên. Điều này làm cho blockchain phân quyền, phân tán, có khả nặng chịu lỗi và đàn hồi vì không có SPOF và dữ liệu được phân phối trên nhiều nút. Hơn nữa, một nút trong lớp
TODO: hình
xác nhận nếu giao dịch mới nhận được từ tầng Ứng dụng là đúng định dạng, được ký bởi người gửi bằng chữ ký kỹ thuật số, khả thi (có đủ số dư để thực hiện giao dịch). Nút này cũng xác thực người gửi bằng cách kiểm tra chữ ký số của họ. Cuối cùng, nút tạo ra một khối mới dựa trên các quy tắc xác nhận và cấu trúc được xác định trên Lớp đồng thuận.
Consensus Layer (lớp động thuận) xác nhận cấu trúc của khối được tạo bởi nút. Khối phải có một hash, hash của khối trước đó, nonce và gốc merkle hợp lệ. Block hash là số nhận dạng duy nhất của khối mới, block hash trước là con trỏ trỏ đến block hash trước đó, nonce liên quan đến pow và nó là kết quả của việc giải toán được đặt ra theo yêu cầu của lớp đồng thuận. Cuối cùng, gốc Merkle cho phép xác minh tất cả các giao dịch cho đến giao dịch đầu tiên. Nút nhận phần thưởng tài chính cho pow và block mới ngay lập tức khi block được truyền tới mạng nơi tất cả node cập nhật sổ cái của họ tạo nên sự đồng thuận trên mạng. Do đó, lớp đồng thuận làm cho blockchain minh bạch, lịch sử hoạt đồng trở nên bất biến. Nếu một giao dịch thay đổi trên một node, tất cả mode phải cập nhật thay đổi này và đào lại block. Do đó, sổ cái kỹ thuật số không thể bị thao túng và gian lận là rất khó xảy ra.
## Blockchain Làm Việc Như Thế Nào
Luồng làm việc của blockchain có 5 bước là Transaction Deﬁnition (định nghĩa giao dịch), Transaction Authntication (xác thực giao dịch),  Block Creation (tạo block), Block Validation (xác nhận block) và Block Chaining (nối block). Transaction Deﬁnition là mô hình giao dịch được xác định trước bởi mạng blockchain. Nó cần có chữ ký số của người gửi, trọng tải giao dịch và khóa công khai của người nhận và được ký mã hóa bằng khóa kỹ thuật số được bảo vệ bằng pass-phrase(cụm từ - một hình thức private key) của người gửi. Transaction Authntication là quá trình mà các nút xác thực nếu A có tài sản, đủ số dư để gửi tài sản và có quyền để chuyển tài sản. Block Creation là quá trình tạo khối bằng cách nhóm giao dịch lại với nhau dựa trên thời gian tạo. Block Validation là quá trình xác nhận hợp lệ khối bằng cách kiểm tra xem nó có hash và nonce hay không. Block Chaining là quá trình thêm khối vào blockchain khi các nút đạt được trên sự đồng thuận. Một ví dụ về tạo blockchain, được mô tả trong hình bên dưới, trong đó Người dùng A chuyển tài sản kỹ thuật số sang Người dùng B. Tài sản có thể là tiền hoặc hợp đồng thông minh. Trong trường hợp này, đầu tiên cả hai người dùng tạo danh tính số của họ với ví blockchain. A cần có khóa riêng của mình và khóa công khai của B để tạo ra Transaction. A nhận khóa công khai của B bằng cách quét địa chỉ blockchain qua QR code hoặc B gửi khóa công khai của họ tới A qua email. A tạo giao dịch được ký bằng khóa riêng tự của mình và thông báo tới mạng blockchain. Giao dịch này được nhận bởi node xác thực và xác nhận tính xác thực của A. Nếu xác thực thất bại, giao dịch bị hủy bỏ, nếu không nó được nhóm lại với các giao dịch chờ xữ lý và block được tạo ra, Block này được truyền tới block khác và khi mạng đạt được tới sự đồng thuần trên block, nó được thêm vào blockchain và khối này trở thành vĩnh viễn sau khi các khối tiếp theo được thêm vào blockchain. Cuối cùng, giao dịch được xác nhận và tài sản chuyển từ A qua B. Tùy thuộc vào mạng blockchain nó có thể mất 2 phút đến 10 phút dể các giao dịch được xác nhận. Ví dụ: Bitcoin 4.1 mất trung bình 10 phút trong khi Ethereum 4.3 mất 2 phút để xác định giao dịch.
## Lỗ Hổng Tìm Tàn
Blockchain nhanh hơn và rẻ hơn so với hệ thống tập trung vì thiết kế phân tán phân cấp của nó. Mặc dù, nó đáng tin cậy và an toàn vì giao thức đồng thuận, mật mã và ẩn danh của nó, nó vẫn có một số lỗ hổng tiềm năng như tấn công 51%, tấn công sybil, trộm danh tính và tấn công dựa trên mã.
### The 51% attach (Tấn công 51%)
Một cuộc tấn công 51% là khi một miner hoặc một bể khai thác điều khiển 51% tài nguyên tính toán mạng blockchain. Kết quả là, họ có thể thống trị việc xác nhận và xác minh các giao dịch cũng như họ có thể thay đổi nội dung của blockchain. Hơn nữa, họ có thể làm mất hiệu lực các khối hợp lệ, tạo và hoàn thành các khối gian lận của chính họ nhanh hơn so với các miner trung thực khác có thể dẫn đến chi tiêu gấp đôi. Bên cạnh đó, những kẻ tấn công có thể thay đổi quy tắc đồng thuận, ăn cắp tài sản từ người khác và thậm chí ngăn chặn việc tạo tiền điện tử. Cho đến nay không có sự cố xấu xảy ra do tấn công 51% mặc dù vào tháng 7 năm 2014, ghash.io đã khai thác hơn 51% mạng lưới bitcoin. Nhưng, ngay sau đó các thợ mỏ khác di chuyển ra khỏi bể khai thác này, do đó bi kịch đã được tránh. Loại hình tấn công này có thể bị ngăn chặn bằng việc sử dụng thuật toán đồng thuận pos.
### Sybil attach (Tấn công mạo nhận)
Blockchain không có thẩm quyền trung tâm để quản lý danh tính của những người tham gia. Kết quả là, kẻ tấn công có thể tạo nhiều bản sao của chính nó, mà có thể trông giống như những người tham gia riêng biệt mặc dù tất cả họ đều được kiểm soát bởi cùng một nút. Kẻ tấn công có thể cố gắng mở kết nối mạng với nạn nhân của nó. Vì vậy, các nút khác có khả năng chỉ kết nối với node tấn công. Kẻ tấn công sau đó có thể từ chối chuyển tiếp các block và giao dịch từ người khác, ngắt kết nối nút kết nối khỏi mạng hoặc chỉ chuyển tiếp các block được tạo bởi chính nó. Cách tấn công này có thể tránh được bằng cách chỉ tin tưởng vào blockchain với pos lớn nhất vì nó không thể dễ dàng giả mạo vì yêu cầu năng lượng khai thác đáng kể.
### Identity theft (Đánh cắp dữ liệu cá nhân)
Mặc dù blockchain không cung cấp quyền sở hữu danh tính người dùng, danh tính kỹ thuật số này được sao lưu bằng khóa cá nhân phải được giữ an toàn. Nếu khóa cá nhân bị đánh cắp hoặc thiết bị lưu trữ khóa riêng bị tấn công, nạn nhân sẽ mất tất cả tài sản kỹ thuật số cũng như nhận dạng kỹ thuật số của nó. Hơn nữa, danh tính kỹ thuật số này không thể được phục hồi và nó sẽ gần như không thể tìm ra thủ phạm. Có nhiều ứng dụng khác nhau để mã hóa và đồng bộ hóa các khóa riêng tư trên các thiết bị khác nhau để khôi phục khóa cá nhân. Nhưng nếu các ứng dụng này có một số mã độc hại hoặc nếu chúng bị tấn công thì người dùng sẽ bị đánh cắp nhận dạng. Ngoài ra, việc đồng bộ hóa các mật khẩu trên nhiều thiết bị sẽ làm tăng khả năng bị tấn công. 
Bên cạnh đó, với sự gia tăng khả nặng tạo ra máy tính lượng tử nó có thể dùng để crack các khóa mã hóa được sử dụng bởi công nghệ blockchain.
### System hacking (Hack hệ thống)
Bản ghi của blockchain hay dữ liệu của nó không thể dễ dàng bị sử đổi hay thay thế. Tuy nhiên, code và hệ thống hiện thực blockchain có thể bị sử đổi dựa trên các công ty và tổ chức, code của blockchain có thể dữa dựa trên mã nguồn mở. Ví dụ, các ứng dụng blockcchain phổ biến nhất Bitcoin và Ethereum là mã nguồn mở. Do ậy, bất kỳ người dùng nào có thể đóng góp và quá trình phát triển blockchain và nếu người đóng góp cung cấp mã nguồn dễ bị tấn công hoặc có lỗi của con người trong mã nguồn, nó có thể xuất hiện trong hệ thống thật, điều này có thể dẫn tới hack hệ thống. Bên cạnh đó, một công ty có thể nới rộng mã nguồn blockchain để sử dụng riêng. Nếu mã nguồn được bảo trì yếu kém hoặc lỗi thời nó có thể dẫn tới việc bị hack. Vào tháng 3 nằm 2014, sàn giao dịch bitcoin MtGox Tokyo đã bị hack và 700 triệu USD tiền bit bitcoin đã bị đánh cắp. Tương tự 2016, hacker đã khai thác lỗ hổng trên Decentralized Autonomous Organization (DAO) và đánh cắp 50 triệu USD tiền Ethereum. 
### Hành động bất hợp pháp
Các tính chất ẩn danh, giao dịch bất biến và phi tập trung của blockchain làm cho nó khó để điều hành và theo dõi các giao dịch. Hơn nữa, bản thân công nghệ này đang ở giai đoạn đầu của quá trình hoàn thiện và các quy định thiết yếu để sử dụng ứng dụng blockchain đang cũng mới bắt đầu hình thành. Do đó, hệ thống có thể bị lạm dụng để rửa tiền, chuyển quỹ bất hợp pháp. Ví dụ, Silk Road, một trang web để mua và bán các loại thuốc bất hợp pháp sử dụng bitcoin cho các khoản thanh toán của nó.
# Các Ứng Dụng Của Blockchain
Blockchain có thể được sử dụng trong các lĩnh vực ứng dụng khác nhau như tài chính, phi tài chính, bảo hiểm, Internet of Things (IOT), chăm sóc sức khỏe, Internet, tiền điện tử. Một số ứng dụng tài chính là Medici, Blockstream, Bitshares và các ứng dụng phi tài chính là Stampery, Ascribe, BlockNotary. Everledger là ứng dụng bảo hiểm và IOT Filament, ADEPT platform là ứng dụng IOT. Ví dụ về các ứng dụng Internet là Namecoin, Ethereum. Ví dụ về các ứng dụng tiền điện tử là Namecoin, bitcoin. Một số ứng dụng phổ biến nhất như bitcoin, Namecoin và Ethereum được mô tả dưới đây.
## Bitcoin
Bitcoin là ứng dụng phổ biến nhất được phát triển trên blockchain. Nó được đề xuất đầu tiên bởi Satoshi Nakamoto vào năm 2008 trong bài báo 'Bitcoin: Hệ thống tiền điện tử Peerto-Peer' mô tả phương thức P2P gửi tiền điện tử từ người này sang người khác mà không cần liên quan đến bên thứ ba. Tiền điện tử dùng để chỉ tiền mã hóa. Nó dựa vào mã khóa công khai để xác định người dùng.
Bitcoin được phát triển để giải quyết các thách thức tài chính hiện tại. Hệ thống tài chính hiện tại được gắn chặt với các bên thứ ba đáng tin cậy như ngân hàng, công ty thẻ tín dụng, họ chuyển tiếp và xử lý các giao dịch tài chính. Các bên thứ ba đáng tin cậy xác nhận, bảo vệ giao dịch và duy trì lịch sử giao dịch mà sau này có thể được sử dụng làm bằng chứng về các giao dịch tài chính để tránh gian lận. Tuy nhiên, suy thoái kinh tế trong năm 2008 đã chỉ ra rằng những bên đáng tin cậy này có thể tạo ra bong bóng kinh tế dẫn đến hậu quả kinh tế thảm khốc.
 Hơn nữa, bên thứ ba cần nhiều tiền từ người dùng để duy trì hoạt động giao dịch. Nếu bên thứ ba đáng tin cậy bị phá sản hoặc bị tấn công, người dùng sẽ mất tài sản của họ. Ngoài những vấn đề này, dữ liệu người dùng được sở hữu bởi bên thứ ba đáng tin cậy có thể lạm dụng và chia sẻ nó với các tổ chức như Cơ quan An ninh Quốc gia (NSA) có thể theo dõi người dùng.
 Bitcoin là tiền điện tử thành công nhất trong lịch sử. Bitcoin đầu tiền được đào vào ngày 3 tháng Một 2009 và vào ngày 9 tháng Một 2009 bitcoin v0.1 đạ được phát hành. Giao dịch đầu tiên được hoàn thành vào tháng Năm 2010 nơi một người dùng mua một cái pizza với giá 10000 bitcoin. Kể tứ đó, giá trị của bitcoin đã tăng vọt sao với tiền giấy.
 Bitcoin sử dụng mạng P2P thay vì bên thứ ba đáng tin cậy để thực thi giao dịch giữa hai người dùng qua Internet. Nó dựa trên chữ ký kỹ thuật số nền tảng là mã hóa khóa công khai để tạo niềm tin thay vì sử dụng bên thứ ba đáng tin cậy. Mỗi người dùng đặt khóa riêng tư và công khai mã hóa nơi khóa công khai phát sóng cho tất cả người dùng trong mạng trong khi khóa cá nhân được người dùng lưu giữ an toàn. Vì vậy, danh tính người dùng vẫn được giữ bí mật. Tuy nhiên, tất cả mọi người trong mạng có thể thấy một số Bitcoin được chuyển từ người dùng A sang B.
 Khi một bitcoin được gửi đến khóa công khai của người nhận. Điều này tạo ra một giao dịch được bảo vệ bằng khóa riêng của người gửi. Việc này được thực hiện theo quy trình mà người gửi phải chứng minh quyền sở hữu giao dịch bằng private key của mình và giao dịch này được xác minh bởi miner bằng khóa công khai của người gửi. Thợ mỏ đảm bảo người gửi có đủ số dư bitcoin để chi tiêu và bitcoin được sở hữu bởi người gửi. Hơn nữa, mỗi giao dịch được thông báo đến tất cả các nút. Sau khi xác minh và xác nhận khối được ghi lại vào blockchain.
Một người dùng có thể bắt đầu sử dụng bitcoin bằng cách tạo ra định danh bitcoin. Điều này được thực hiện bằng cách tải ví bitcoin và tạo tài khoản bitcoin và Bitcoin có thể được đổi từ tiền mặt bằng cách sử dụng các sàn giao dịch bitcoin như Bistamp, Bitsquare, Kraken.
Ngoài ra, người dùng có thể phát triển ứng dụng Bitcoin như Namecoin bằng cách fork mã nguồn của bitcoin và sửa đổi nó để hỗ trợ trường hợp sử dụng của doanh nghiệp.
### Transactions (Giao dịch)
Nhiều giao dịch diễn ra tại một thời điểm nhất định và bất kỳ nút nào cũng có thể thu thập các giao dịch chưa được mã hóa để tạo thành khối và lang truyền các khối này vào mạng. Ngoài ra, các giao dịch không có giá trị được tạo trên mạng gây ra sự chậm trễ trong mạng P2P. Do đó, các giao dịch tại một thời điểm được nhóm lại với nhau để tạo thành khối. Block này nối với block trước đó nhờ sử dụng hash của block trước đó. Block được thêm vào blockchain sau khi miner đã giải xong một bài toàn phức tạp. Miner đầu tiên giải được bài toán hoặc nói cách khác có khả nặng tạo pow, lang truyền kết quả tới mạng. Trung bình năng lực tính toán được yêu cầu bởi pow thì khá cao. Tuy nhiên, xác minh lại rất đơn giản và nó hoàn thành bằng cách chạy một hàm hash. Độ khó của vấn đề được điều chỉnh sao cho, vấn đề được giải quyết trung bình cứ 10 phút một lần. Các thợ mỏ nhận được phần thưởng tài chính cho việc làm xác thực. Phần thưởng này là 50 bitcoin trong lần đầu và nó được giảm đi một nửa mỗi bốn năm để đảm bảo cung cấp bitcoin vừa phải và tránh lạm pháp. Kết quả là, số lượng Bitcoin tối đa sẽ được tạo ra vào năm 2140. Thỉnh thoảng có nhiều hơn một khối sẽ được giải quyết đồng thời dẫn đến một số nhánh được tạo ra trên blockchain, trong đó chỉ có nhánh dài nhất được coi là hợp lệ.
Mỗi giao dịch bitcoin có ba phần, metadata, đầu vào và đầu ra. Phần đầu là metadata nó có khóa thời gian (thời gian giao dịch được thêm vào blockchain), kích thước giao dịch và hash SHA-256 của toàn bộ giao dịch. Hash được xem như ID độc nhất của giao dịch. Phần thứ hai là đầu vào, nó là một mảng tham chiếu tới giao dịch trước đó và số thứ tự của nó. Nó cũng có scriptSign, thứ chưa chữ ký và khóa công khai. Cuối cùng, phần thứ ba là đầu ra, nó cũng là một mảng, thứ chứa hướng dẫn để gửi bitcoin tới khóa công khai của người nhận.
Hơn thế nữa, đầu ra có một giá trị số nguyên, nó cho biết số tiền sẽ được gửi đi, scriptPubKey thứ đặc tả ECDSA hash của khóa công khai. Số tiền nói trên được tính bằng đơn vị bitcoin và đơn vị bitcoin nhỏ nhất được gọi là satoshi, nơi 10^8 satoshi bằng một bitcoin. Đầu ra cũng có một đoạn mã ngắn: scriptPubKey như trong hình cho biết hash ECDSA của khoá công khai và một quy trình xác thực chữ ký, đại diện cho các điều kiện mà giao dịch này phải đáp ứng. Để thực hiện thành công giao dịch, sciptSig và tệp scriptPubKey phải được thực hiện thành công theo thứ tự.
### Ngôn ngữ kịch bản
Bitcoin sử dụng ngôn ngữ kịch bản bitcoin đã được thiết kế và phát triển đặc biệt cho Bitcoin chỉ với 256 hướng dẫn. Bitcoin có ít hơn 200 lệnh gọi là opscodes. Nó là ngôn ngữ lập trình dựa trên stack với mục đích hỗ trợ cho hoạt động mã hóa như dữ liệu hash và xác minh chữ ký. Thiết kế của ngôn ngữ theo kiến trúc ad-hoc, non-Turing, có nghĩa là nó không có khả năng tính toán mẽ tùy ý và mọi lệnh được thực thi một cách chính xác một lần theo cách tuyến tính. Nó không hỗ trợ vòng lặp bởi vì các thợ mỏ phải thực thi các kịch bản được gửi bởi những người tham gia từ bất kỳ đâu nên nó cần tránh các vòng lặp vô tận. Khi kịch bản được thực hiện, chỉ có hai kết quả có thể có. Hoặc là nó thực hiện thành công mà không có lỗi và giao dịch là hợp lệ hoặc có một lỗi trong khi kịch bản đang thực hiện. Trong trường hợp thứ hai, toàn bộ giao dịch sẽ không hợp lệ và không được chấp nhận nối vào blockchain.
### Mạng Bitcoin
Giao dịch Bitcoin có thể được thực hiện trên ba mạng, main-net (mạng chính), test-net (mạng thử nghiệm) và private-net (mạng riêng). Main-net là mạng sản xuất Bitcoin chính, nơi bitcoin được yêu cầu cho các giao dịch. Mạng thử nghiệm cũng là mạng công cộng của Bitcoin nhưng có khối genesis khác mạng chính và đã được đặt lại ba lần. Mạng thử nghiệm không yêu cầu bitcoin thực và được dùng cho việc thử nghiệm các ứng dụng bitcoin trước khi triển khai lên mạng chính. Mạng chính và mạng thử nghiệm được phát triển và duy trì bởi các nhà phát triển lõi Bitcoin trong khi mạng riêng có thể được triển khai bởi nhà phát triển để sử dụng cho mục đích cá nhân hoặc các công ty để hỗ trợ trường hợp sử dụng cho mục đích riêng của riêng họ. Ngoài ra, khai thác trong mạng riêng nhanh hơn mạng thử nghiệm vì có ít người dùng và giao dịch hơn so với mạng thử nghiệm hoặc mạng chính.
### Lợi thế
Công nghệ Bitcoin có một số ưu điểm so với các hệ thống tài chính hiện có sử dụng kiến ​​trúc server-client nơi người dùng được đăng ký với máy chủ trung tâm và máy chủ trung tâm sở hữu dữ liệu người dùng. Công nghệ Bitcoin an toàn vì các giao dịch được bảo mật bằng khóa công khai mật mã và niềm tin được thiết lập bằng P2P. Nó rẻ hơn vì các giao dịch được phát ngay lập tức qua mạng P2P và chúng được truyền đi nhanh nhất có thể đến các nút khác. Ngoài ra, chi phí xử lý giao dịch trung gian thấp hơn hệ thống tài chính hiện có. Bên cạnh đó, mạng còn phân tán và giao dịch không thay đổi, được lưu vĩnh viễn vào sổ cái phân tán. Sổ cái này giúp dễ dàng phát hiện gian lận và chứng minh quyền sở hữu với các giao dịch. 
### Những mối đe dọa
Bitcoin có một số lỗ hổng và các hạn chế như nó không hoàn toàn có thể mở rộng vì chỉ có Bitcoins giới hạn (khoảng 21 triệu). Nó tốn thời gian để các giao dịch được xác nhận là 10 phút. Vì vậy, phải mất một giờ để có được sáu khối mới được thêm vào blockchain. Kích thước blockchain của Bitcoin đã tăng từ 50GB lên 120GB và nó luôn tăng lên. Ngoài ra, sức mạnh tính toán cần để giải quyết vấn đề toán học tăng theo cấp số nhân mọi lúc. Kết quả là, chỉ một số nút có công suất tính toán cao mới có thể trở thành thợ mỏ thực thụ, điều này có thể phá vỡ nguyên tắc của hệ thống phân tán. Chi phí năng lượng dành cho tính toán ngày càng cao. Nếu tin tặc lấy cắp khóa cá nhân của người dùng, họ có thể lấy cắp danh tính người dùng và không thể khôi phục được và người dùng sẽ mất tất cả bitcoin của mình. Ví dụ, vào tháng 2 năm 2014 Mt. Gox, sàn giao dịch Bitcoin lớn thứ ba trên thế giới có 850.000 bitcoin bị đánh cắp và do đó công ty phải tuyên bố phá sản.
## Namecoin
Namecoin là một tiền điện tử thay thế (alt-coin) dựa trên giao thức BitDNS với ý định tạo ra censor-resistance domain name system (hệ thống tên miền kiểm duyệt) nằm ngoài sự kiểm soát của bất kỳ thực thể duy nhất nào. Hệ thống sử dụng blockchain để quản lý tra cứu tên miền thay vì quyền trung ương như Internet Corporation for Assigned Names and Numbers (ICANN) mà sau này đòi hỏi nhiều sự tin tưởng vào cơ quan trung ương và có thể tạo ra SPOF. Namecoin là fork đầu tiên của mã nguồn bitcoin với blockchain riêng của nó. Nó sử dụng các tính năng cốt lõi của Bitcoin chẳng hạn như pow, thời gian tạo khối và các hoạt động giao dịch với các tính năng bổ sung như name/value store. Name/value store là một cơ sở dữ liệu giao dịch blockchain nơi người dùng có thể lưu trữ tùy ý dữ liệu định danh như username, email hoặc địa chỉ web. Nó đã được sử dụng chủ yếu để định danh trang web và nó cho phép đăng ký và phân giải tên miền cho tên miền cấp cao nhất (top-level domain TLD) .bit.
Quảng trường Namecoin Zooko Traingle (Namecoin squares Zooko Traingle) cho phép đặt tên miền mà con người có thể human-readable (đọc được), decentralized (phân cấp) và authenticated (chứng thực). Human-readable nghĩa là người dùng có thể chọn một tên miền gồm các ký tự mà con người đọc được. Decentralized có nghĩa là không có bên trung tâm đáng tin cậy hoặc SPOF. Authenticated nghĩa là người dùng được sở hữu mạnh mẽ tên miền này nhờ sử dụng cặp khóa mật mã. Cho đến năm 2011, việc thiết kế một hệ thống có thể có tất cả ba thuộc tính này là không thể. Tuy nhiên, Namecoin là hệ thống đầu tiên cung cấp hệ thống có tất cả ba thuộc tính.
Namecoin cyptocurrency được gọi là namecoin và đơn vị của nó có ký hiệu là NMC. Hơn nữa, người dùng có thể đăng ký tên miền .bit tại dotbit.me với một khoản phí rất nhỏ là 0,01 BTC, 5 hoặc 20 NMC. Hơn nữa, tương tự như bitcoin, Namecoin cũng bị giới hạn tới 21 triệu đồng. Khối Namecoin đầu tiên được khai thác vào tháng 4 năm 2011.
Dựa trên Namecoin, các ứng dụng khác nhau như OneName và Blockstack đã được phát triển. OneName sử dụng blockchain Namecoin để ghi lại dữ liệu thành viên trong khi Blockstack cung cấp chức năng tương tự với nền tảng Bitcoin blockchain và giới thiệu khả năng hỗ trợ phát hành những ứng dụng không có server.
## Ethereum
Ethereum được biết đến như blockchain phổ biến thứ 2. Nó được phát triển để giải quyết những điểm yếu của bitcoin. Điểm yếu đầu tiên là ngôn ngữ kịch bản bitcoin có giới hạn số lệnh và non-Turing. Ngôn ngữ kịch bản của bitcoin tập vào trường hợp sử dụng bitcoin. Việc phát triển các ứng dụng bằng cách sử dụng kịch bản lệnh Bitcoin đòi hỏi các nhà phát triển phải nới rộng mã nguồn bitcoin và thêm logic cho các trường hợp sử dụng riêng của họ. Việc này tiêu tốn thời gian và khó để duy trì. Do đó, để giải quyết những thách thức này, Ethereum đã được phát triển. Ethereum cung cấp một nền tảng cho các lập trình viên để xây dựng các ứng dụng trên đầu của blockchain được gọi là một blockchain Ethereum. Nó được đề xuất đầu tiên vào cuối năm 2013 bởi một lập trình viên Bitcoin tên là Vitalik Buterin trong Ethereum Whitepaper: Một hợp đồng thông minh thế hệ tiếp theo và nền tảng ứng dụng phân cấp '. Luận án này đề xuất ngôn ngữ lập trình Turing hoàn chỉnh để viết kịch bản (hợp đồng thông minh) và Máy ảo Ethereum (EVM) để thực thi các hợp đồng và giao dịch thông minh.
Người dùng Ethereum có thể tạo các hợp đồng thông minh và tải chúng lên Ethereum Blockchain với một khoản phí nhỏ. Những người dùng Ethereum khác có thể truy cập các hợp đồng này bằng các cuộc gọi thủ tục từ xa được cung cấp bởi Ethereum Application ProgramInterface (API). Hợp đồng có thể chứa dữ liệu, gửi giao dịch và tương tác với các hợp đồng khác. Các hợp đồng được thực hiện bằng bytecode. Sau khi hợp đồng được tải lên blockchain, chúng được lưu trữ, thực hiện và dịch bởi EVM. EVM yêu cầu một khoản phí nhỏ để thực hiện giao dịch. Các khoản phí này được gọi là gas và lượng gas phụ thuộc vào kích thước của lệnh. Số lệnh hợp đồng càng dài thì gas càng nhiều. Ngoài ra, Ethereum có tiền điện tử riêng được gọi là ether và nó được trình bày bằng chữ viết tắt ETH. Ether là một loại tiền để sử dụng ứng dụng trên mạng Ethereum. Đơn vị nhỏ nhất của ether là Wei. Một ether bằng 10^18 Wei. Người dùng có thể sử dụng trao đổi Ethereum để đổi thành tiền vật chất hoặc đổi tiền bình thường thành ether.
### Ethereum Blockchain và tài khoảng
Ethereum blockchain tương tự như blockchain bitcoin với các điểm khác biệt quan trọng nhất định trong kiến ​​trúc. Các điểm khác biết được liệt kê như sau. Chuỗi khối Ethereum chứa một bản sao của cả danh sách giao dịch và cả trạng thái gần đây nhất. Thời gian tạo khối là 12 giây một lần. Ethereum blockchain sử dụng giao thức GHOST để đạt được nhánh đồng thuận với pow được gọi là Ethash. Đã có kế hoạch để chuyển từ POW sáng POS. Yêu cầu tối thiểu 6 lần xác minh giao dịch để giao dịch được chấp thuận và người khai thác nhận được 5 ether như phần thưởng tài chính không phải là một nữa, giống như bitcoin.
Người dùng cần một tài khoản để sử dụng Ethereum. Một tài khoản có bốn trường: nonce, số dư ether, mã hợp đồng và lưu trữ. Các nonce đảm bảo một giao dịch được xử lý chỉ một lần. Số dư Ether là số tiền mà người dùng có. Mã hợp đồng chứa các hợp đồng thông minh do người dùng triển khai cho EVM. EVM cung cấp môi trường để thực hiện hợp đồng và lưu trữ liên tục để lưu dữ liệu. Tài khoản Ethereum có hai loại, tài khoản external (bên ngoài) và tài khoản contract (hợp đồng). Tài khoản external được sở hữu và tạo bởi người dùng và được kiểm soát bằng khóa riêng. Tài khoản hợp đồng được kiểm soát bởi mã hợp đồng. Các tài khoản tạo ra các giao dịch và tin nhắn.
### Giao dịch và tin nhắn
Giao dịch là gói dữ liệu được người gửi ký. Nó lưu trữ dữ liệu được gửi từ một tài khoản external. Giao dịch chứa địa chỉ người nhận, chữ ký số của người gửi, số tiền ether được gửi đến người nhận, dữ liệu, startgas và gasprice. Địa chỉ nhận là địa chỉ khóa công khai của người nhận và chữ ký số được dùng để xác thực người gửi. Trường dữ liệu là trường không bắt buộc phải có và không có chức năng trong hệ thống. Tuy nhiên, nó có thể được sử dụng bởi máy ảo có opcode (operation code - mã hoạt động) để smart contract có thể đọc dữ liệu. Startgas và gasprice là để tránh bất kỳ tính huống các vòng lặp tiêu hao hết gas. Mỗi giao dịch có yêu cầu thiết lập giới hạn các bước tính toán cần thiết để thực thi. Đơn vị cơ sở của các bước tính toán gọi là gas và mỗi bước tính toán yêu cầu 1 gas. Hơn nữa, có một khoản phí cho mỗi 5 gas chi tiêu, là 1 gas. Mọi giao dịch phải xác định trước bao nhiêu khí nó sẵn sàng sẽ được dùng. Nếu việc thực hiện hết gas, nó sẽ ngăn chặn giao dịch và tiêu thụ hết gas. Do đó, điều quan trọng là cung cấp đủ gas cho các lần thực thi giao dịch. Ethereum theo thiết kế không thích hợp cho các hợp đồng tính toán nặng khi việc tạo và thực hiện các smart contract là rất tốn kém. Tạo và thực thi một hợp đồng yêu cầu ether, nhưng việc truy vấn một hợp đồng không yêu cầu bất kỳ ether nào. Ví dụ: giả sử hợp đồng có hướng dẫn đăng ký và liệt kê người dùng. Sau đó, đăng ký người dùng yêu cầu ether nhưng truy xuất danh sách người dùng không yêu cầu bất kỳ ether nào.
Không giống như giao dịch, tin nhắn được tạo ra bởi tài khoản contract thay vì tài khoản external. Tin nhắn được tạo ra khi một hợp đồng gửi thông tin đến hợp đồng khác thực hiện mã lệnh CALL. Các thông điệp chỉ sống trong môi trường thực thi Ethereum. Tương tự như giao dịch, tin nhắn cũng có người gửi, người nhận, ether được gửi, giá trị dữ liệu và giá trị startgas.
### Smart Contracts
Hợp đồng thông minh là thành phần chính của Ethereum. Nó là một chương trình tự trị tự thực hiện trong môi trường thực thi Ethereum. Nó được thực thi khi được kích hoạt bởi một tin nhắn hoặc một giao dịch. Nó có số dư ether riêng. Mã hợp đồng thông minh thực hiện cho đến khi nó đạt đến một lỗi hoặc lệnh STOP hoặc RETURN. Các mã này có quyền truy cập vào ba loại không gian lưu trữ: ngăn xếp, bộ nhớ và bộ lưu trữ để lưu trữ dữ liệu. Ngăn xếp là vùng chứa last in first out, nơi các giá trị có thể được nhét vào và lấy ra. Tương tự, bộ nhớ là mảng byte không giới hạn. Bộ lưu trữ là không gian lưu trữ dài hạn theo kiến trúc cặp key/value.
Hợp đồng thông minh được viết bằng cách sử dụng ngôn ngữ solidity hoặc serpent. Khi một chương trình được viết bằng một trong những ngôn ngữ này, nó có thể được triển khai trong Ethereum Blockchain bằng cách sử dụng ví Mist hoặc Ethereum. Ví Mist và Ethereum là ứng dụng được phát triển bởi nền tảng ethereum. Ứng dụng này cho phép các nhà phát triển / người dùng tạo tài khoản và các ứng dụng ethereum. Ứng dụng Mist và Wallet cũng cho phép người dùng kiểm tra và triển khai các ứng dụng ethereum của họ vào mạng. Hơn nữa, giống như trong Bitcoin, hợp đồng có thể được triển khai trong mạng lưới chính hoặc mạng riêng hoặc mạng thử nghiệm.
### Decentralized Autonomous Organization (Tổ chức tự trị phi tập trung)
Ethereum hợp đồng thông minh và blockchain cung cấp tiềm năng không giới hạn để phát triển một loạt các ứng dụng phi tập trung (Dapps). Ví dụ, tiền điện tử riêng, tổ chức tự quản phân cấp (decentralized autonomous organization - DAO) và hệ thống lưu trữ phi tập trung. Phiên bản riêng của tiền điện tử có thể được các công ty sử dụng cho mục đích nội bộ của họ. DAO cung cấp nền tảng phi tập trung. Nền tản này có thể được sử dụng bởi nhà đầu tư để đầu tư vào các dự án khởi nghiệp vì tính minh bạch, phân tán và phân quyền. Lưu trữ phân cấp cho phép người dùng cho thuê ổ cứng không sử dụng của họ. Một số ứng dụng thực tế là Weifund, Uport và Provenance. Weifund tận dùng smart contract để cung cấp một nền tảng mở cho các chiến dịch gây quỹ cộng đồng. Uport cung cấp một nền tản cho người dùng để tự kiểm soát định danh của họ thay vì đưa sự kiểm soát cho các tổ chức chính phủ. Provenance cho phép mở rộng chuỗi cung ứng bằng cách giám sát lịch sử sản phẩm nhờ đó người tiêu dùng có thể đưa ra quyết định khi họ mua sản phẩm.
### Những mối đe dọa
Mặc dù Ethereum là an toàn và phân tán nó có những điểm yếu nhất định. Mã nguồn Ethereum là mã nguồn mở và được duy trì bởi một nhóm những nhà phát triển. Vì vậy, nếu có một lỗi trong mã nguồn hoặc lỗi kỹ thuật, hacker có thể dễ dàng khai thác nó. Ví dụ, vào tháng 4 2016 The Decentralized Autonomous organization (DAO) được phát triển từ fork cứng (không tương thích ngược) của Ethereum với mục tiêu tạo ra một liên doanh tư bản. Nhưng, vào tháng 5 2016, một lỗ hổng trong mã nguồn của DAO dẫn tới mất 50 triệu USD tiền Ether.
# BitTorrent
BitTorrent là một giao thức dùng để phân phối tập tin. Nó xác định nội dung theo URL và được thiết kế để tích hợp liền mạch với web. Lợi thế của nó so với HTTP thuần là khi có nhiều lượt tải xuống trên cùng một tệp xảy ra đồng thời, các trình tải xuống đồng thời tải lên cho nhau, điều này giúp hỗ trợ số lượng người tải xuống rất lớn.
## Các thực thể
Quá trình phân phối file qua BitTorrent bao gồm các thực thể sau:
- Một web server truyền thống
- Một file chứa metainfo
- Một BitTorrent tracker
- Một trình duyệt truyền thống
- Một trình download
## Khởi chạy máy chủ torrent
Để khởi chạy máy chủ torrent cần làm theo các bước sau đây:
1. Khởi chạy một tracker
2. Khởi chạy một web server truyền thống, như apache.
3. Liên kết phần mở rộng .torrent với mimetype application mimetype / x-bittorrent trên web server.
4. Tạo tệp metainfo (.torrent) bằng cách sử dụng tệp hoàn chỉnh để được phân phát và URL của trình theo dõi.
5. Đặt tệp metainfo trên máy chủ web.
6. Liên kết đến tập tin metainfo (.torrent) vào một số trang web khác.
7. Chạy một trình tải xuống đã có tệp hoàn chỉnh.
## Download
Để bắt đầu tải xuống, người dùng làm theo các bước sau:
1. Cài đặt một trình download BitTorrent.
2. Duyệt tìm file Torrent.
3. Click vào link tới file .torrent.
4. Chọn nơi lưu file, hoặc resume nếu đã có nó.
5. Chờ quá trình download hoàn thành.
6. Đóng trình donwload (không bắt buộc).
## Mã hóa Bencode
Bencoding là các mã hóa được sử dụng chủ yếu trong bittorrent, nó thực hiện mã hóa theo nguyên tắc sau.
- Chuỗi thì được gắn độ dài ở tiền tố theo hệ thập phân, theo sau là một dấu hai chấm và chuỗi. Ví dụ 4:spam tướng ứng với 'spam'.
- Số nguyên được biểu diễn bằng chữ 'i' theo sau bằng số nguyên theo hệ 10 và kết thức bằng chữ 'e'. Ví dụ i3e tương ứng với 3 và i-3e tương ứng với -3. Số nguyên không có giới hạn kích thước. i-0e là không hợp lệ. Tất cả mã hóa với số không ở đầu đều là bất hợp lệ, ngoại trừ i0e, thứ dĩ nhiên là tương ứng với 0.
- Danh sách được mã hóa bằng ký tự 'l' ở đầu tiên theo sau là các phần tử của nó kết thúc với ký tự 'e'. Ví dụ l4:spam4:eggse tương ứng với ['spam','eggs'].
- Từ điển được mã hóa bằng ký tử 'd' theo sau là danh sách xen kẽ giữa khóa và giá trị của nó và kết thúc cũng bằng ký tự 'e'. Ví dụ, d3:cow3:moo4:spam:4eggse tương ứng với {'cow':'moo', 'spam':'eggs'} và d4:spaml1:a1:bee tương ứng với {'spam':['a','b']}. Các khóa phải là chuỗi và xuất hiện theo thứ tự được sắp xếp (được sắp xếp dưới dạng chuỗi thô chứ không phải chữ và số).
## Metainfo File
Tệp Metainfo (còn được gọi là tệp .torrent) là các từ điển được mã hóa bencode với các key sau:
- announce: URL của tracker.
- info: Là một từ điển, với các key được mô tả ở phần tiếp theo.
Tất cả chuỗi trong một file .torrent phải được mã hóa theo chuẩn UTF-8.
## Từ điển Info
*name* ánh xạ tới một chuỗi được mã hóa UTF-8, cũng là tên gợi ý để lưu file (hoặc thư mục). Nó hoàn toàn chỉ là tư vấn nên không bắt buộc phải có và phải tuân theo.
*piece length* ánh xạ tới kích thước của mỗi mảnh mà file được cắt thành. Để truyền file, file được cắt thành các mãnh có kích thước cố định như nhau ngoại trừ mảnh cuối cùng có thể ngắn hơn. 'piece length' gần như luôn là mũ của hai, phổ biến nhất là 2^18 = 256 K (BitTorrent trước phiên bản 3.2 sử dụng 2^20 = 1 M làm mặc định).
*pieces* ánh xạ tới một chuỗi có độ dài là bội số của 20. Nó được chia nhỏ thành các chuỗi có chiều dài 20,chúng là các hash SHA1 của phần tử tại mãnh tương ứng.
*length* và *files*, hai khóa này không cùng tồn tại với nhau. Nếu *length* thì có nghĩa là chỉ có một tệp duy nhất, ngược lại thì sẽ có tập hợp các tệp theo cấu trúc thư mục. Trong tường hợp đó là một tệp thì đơn vị của *length* là byte. Nhằm mục đích tránh trùng lặp key, trong trường hợp nhiều tệp thì chúng sẽ được nối lại tệp theo thứ tự chúng xuất hiện tạo thành danh sách tệp. Danh sách các tệp là giá trị *files* xánh xạ tới, và nó là một danh sách các từ điển chứa các khóa sau:
- *length* - Độ dài của file, đơn vị byte.
- *path* - Một danh sách chuỗi được mã hóa thep UTF-8 tương ứng tới các tên thư mục con, phần tử cuối cùng là tên file (nên một danh sách có độ dài bằng 0 sẽ là trường hợp lỗi).
## Tracker
Yêu cầu GET tới Tracker có các khóa sau:
- info_hash
20 byte Hash sha1 mã hóa bencoded của tệp metainfo. Giá trị này phải được gói lại.
Lưu ý rằng đây là một chuỗi con của tệp metainfo. info_hash phải là hash của tệp .torrent đã được mã hóa.
- peer_id
Một chuỗi có độ dài 20, được trình download dùng như id của nó. Mỗi downloader tạo ra id của nó một cách ngẫu nhiên khi bắt đầu download. Giá trị này phải được gói lại.
- ip
Một tham số này là tuy chọn, IP (hoặc tên dns) mà peer này đang sở hữu. Thường được sử dụng để xác định nguồn gốc.
- port
Port mà peer này đang nghe. Phổ biến là port 6881 và nếu port đang được dùng trình download sẽ thử 6882, sau đó 6883, v.v ... và từ bỏ nếu lơn hơn 6889.
- uploaded
Tổng số dung lượng được tải lên cho đến nay, được mã hóa thập phân.
- downloaded
Tổng số dung lượng tải xuống, được mã hóa thập phân.
- left
Số byte mà peer còn lại, được mã hóa thập phân. Lưu ý rằng con số  này không thể được tính dựa trên downloaded và độ dài tệp vì có thể có trường hợp tải tiếp và có khả năng một số dữ liệu đã tải xuống không thành công và phải được tải xuống lại.
- event
Đây là một khóa không bắt buộc, nó ánh xạ đến *started* bắt đầu, *completed* hoàn thành hoặc *stopped* dừng (hoặc *empty* trống, nghĩa là không có sẵn). Thông báo *started* được gửi khi tải xuống lần đầu tiên và một thông báo *completed* sẽ được được gửi khi quá trình tải xuống hoàn tất. Thông báo *completed* sẽ không được gửi nếu tệp hoàn tất khi bắt đầu. Trình tải xuống gửi thông báo *stopped* khi nó ngừng tải xuống.

Phản hồi của tracker được mã hóa bencode. Nếu phản hồi của sẽ có một key *failure*, thì nó sẽ là chuỗi thông báo tại sao truy vấn bị lỗi, và không có key nào được truy vấn nữa. Nếu không, nó phải có hai key: *interval* chứa thời gian dowloader nên chờ giữa những lần truy vấn và *peers* chứa danh sách các tử điển tương ứng với *peers*, mỗi phần tử chứa id, ip và port, ánh xạ tới id tự chọn của peer, IP address hoặc dns và port. Lưu ý, trình download có thể gửi thêm request không theo yêu cầu của tracker nếu nó không nhận được thông báo từ peer khác hoặc nó cần thêm peer.
Bạn cũng có thê thêm thông tin vào metainfo nhưng hãy thông nhất với Bram Cohen (cha đẻ BitTorrent) để đảm bảo thông tin hoạt động đúng.
Request cung thể được yêu cầu qua giao thức UDP.
## Peer Protocol
Giao thức ngang hàng của BitTorrent hoạt động trên giao thức TCP hoặc uTP.
Các kết nối giữa các peer là đối xứng. Thông báo được gửi theo cả hai hướng như nhau và dữ liệu có thể truyền theo một trong hai hướng.
Giao thức ngang hàng có liên quan đến các việc truyền các mãnh của tệp như được mô tả trong tệp metainfo. Khi một peer hoàn tất tải xuống một phần và kiểm tra xem hash có phù hợp hay không, nó thông báo rằng nó có phần đó cho tất cả các peer của nó.
Mỗi kết nối chứa 2 bit trạng thái để cho biết: *choked* (nghẽn) hoặc không và *interested* (có hứng thú) hoặc không. Thông báo chocked nghĩa là sẽ không có dữ liệu nào được gửi đi cho đến khi hết nghẽn. Lý do và công nghệ sẽ dược giải thích sau.
Dữ liệu truyền bất cứ khi nào một bên hứng thú và bên kia không bi nghẽn. Trạng thái hứng thú phải được giữa cập nhật liên tục, bất cứ khi nào một trình download thiếu thứ gì đó nó sẽ hỏi các peer không bị nghẽn, mặc dù trình download đó thể đang bị nghẽn, thì nó cũng cố bày tỏ một ít hứng thú. Làm nhứ thế khá là mưu mẹo, nhưng nó giúp downloader có thể biết được peer nào có thể dùng để download ngay khi nó hết nghẽn.
Khi data được truyền, trình download nên tải vài mãnh cùng một lúc để có thể đạt được hiệu xuất tốt hơn (điều này được gọi là cơ chế đường ống).
Giao thức ngang hàng chứa một lần bắt tay theo sau đó là một luồng thông điệp không bao giờ kết thúc. Bắt tay bắt đầu với ký tự '19' theo sau đó là chuỗi 'BitTorrent protocol'. Ký tự đầu tiên là độ dài của tên giao thức, đặt nó ở đó với hy vọng rằng các giao thức mới có thể làm tương tự và do đó sẽ tạo thành chuẩn chung.
Tất cả các số nguyên được gửi trong giao thức được mã hóa theo kiểu 4 byte big-endian.
Sau header là 8 byte được chuẩn bị sẵn, chứa toàn số không trong tất cả các phiên bản được hiện thực cho đến hiện tại. Nếu bạn muốn mở rộng protocol sử dụng những byte đó, lần nữa hãy thống nhất với Bram Cohen để đảm bảo phần mở rộng của bạn tương thích.
Tiếp theo là đến id gồm 20 byte hash sha1, id được thông báo tới tracker và sẽ nằm trong phản hồi từ tracker. Nếu id từ phía người nhận không khớp với một trong số các các id có sẵn, nó vẫn sẽ phục vụ kết nối đó.
Id đó dùng cho quá trình bắt tay, tiếp đến là một luồn chứa độ dài tiền tố và tin nhắn. Tin nhắn chứa độ dài bằng 0, là từ những peer còn tồn tại vì vậy sẽ bị phớt lờ. Nhìn chung mục tiêu là gửi một tin mỗi 2 phút, nhưng trong trường hợp dữ liệu được yêu cầu nhiều thì thời gian này có thể ngắn hơn.
## Peer Messages 
Tất cả các thông điệp không được giữa tồn tại liên tục bắt đầu với một byte chứa kiểu của chúng.
Giá trị những kiểu có thể là:
- 0 - choke (nghẽn)
- 1 - unchoke (không nghẽn)
- 2 - interested (hứng thú)
- 3 - not interested (không hứng thú)
- 4 - have (có)
- 5 - bitfield
- 6 - request (yêu cầu)
- 7 - piece (mãnh)
- 8 - cancel (hủy)
'choke', 'unchoke', 'interested' và 'not interested' không chứa gói tin.
'bitfield' chỉ gửi một lần đầu. 'bitfield' là một trường bit với bit tại vị trí tướng ứng với mãnh mà trình download có được ghi là 1, phần còn lại sẽ là những số 0. Trình download chưa có bất kỳ mãnh nào có thể bỏ qua tin nhắn 'bitfield'. 8 byte đầu tiền của bitfield tương ứng với ví trí từ 0-7, tiếp theo là 8-15,... Bit cuối cùng được gán giá trị 0.
Gói tin của tin nhắn 'have' là một số, số này chỉ ra vị trí mà trình download đã tải xong và đã được kiểm tra hash.
Tin nhắn 'request' chứa các thông tin: ví trị, nơi bắt đầu và độ dài. Hai byte cuối cùng của nó cho biết vị trí byte. Độ dài thường là số mũ của 2 nếu không thì nó đã bị rút gọn tới cuối file. Tất cả các hiện thực hiện tại sử dụng 2^14 (16kiB) và đóng các kết nối yêu cầu dung lượng lớn hơn số đó.
Tin nhắn 'cancel' tương tự như tin nhắn 'request'. Nó thường được gửi vào cuối quá trình download. Khi một donwload gần hoàn tất, sẽ có một số mãnh còn lại tải xuống còn tồn lại. Để tải xuống chúng một cách nhanh chóng, một yêu cầu với các mãnh đó được gửi tới tất cả các trình download mà nó đang tải, ngay khi có được các mãnh đó nó ngay lập tức 'cancel' tất cả.
Tin nhắn 'piece' chứa các thông tin ví trị, nơi bắt đầu và độ dài. Dễ dàng thấy rằng nó xuất hiện cùng với tin nhắn request. Có thể có trường hợp các mãnh không mong đợi đến trong khi trình download đang bị nghẽn có thể do tin nhắn choke và unchoke được gửi quá nhanh hoặc quá trình gửi tin quá lâu.
Trình download thường sẽ donwload các mãnh theo thứ tự ngẫu nhiên, điều này thật sự tốt vì nó sẽ giúp tăng tốc trao đổi trong mạng.
Nghẽn xuất hiện do một số nguyên nhân. Kết nối TCP bị tắt nghẽn vì mở quá nhiều kết nối cũng một thời điểm. Ngoài ra, nghẽn cho phép peer sử dụng thuật toán tit-for-tat-ish để đảm bảo tốc độ tải xuống nhất quán.
Thuật toán nghẽn được mô tả hiện tại chỉ mới có một hiện thực.
Một vài tiêu chí mà thuật toán nghẽn tốt cần có là nó nên giới hạn số lượng kết nối tải lên đồng thời để đạt hiệu suất tốt nhất. Nó nên tránh nghẽn và thông báo hết nghẽn nhanh chóng, được biết đến là 'fibrillation'. Nó nên đáp lại peer cho phép nó download. Cuối cùng, nó nên thử từ chối một số kết nối nếu nó nhận ra rằng các kết nối này không nên có.
Thuật toán nghẽn hiện tại tránh 'fibrillation' chỉ bằng cách thay peer bị nghẽn mỗi 10 giây. Nó giúp có được lượng upload lớn bằng các tháo nghẽn cho 4 peer có tỉ lệ download tốt nhất. Peer có tỉ lệ upload lớn nhưng không hứng thú sẽ được gỡ nghẽn và nếu họ trở nên hứng thú thì peer upload tệ nhất sẽ bị báo là nghẽn. Nếu một download có toàn bộ file, nó sẽ dựa vào tỉ lệ upload của nó nhiều hơn download của nó để quyết định ai để gỡ nghẽn.
Mỗi 30 giây, một peer sẽ được gỡ nghẽn bất kể tỉ lệ upload của nó, để cho chúng cơ hội hoàn thành việc upload.
# Open Bucket
## Mối quan hệ giữ những công nghệ lựa chọn
## Thiết kế
### Yêu cầu
### Kiến trúc phần mềm
### Flow diagram
## Hiện thực
### Software
### Cài đặt môi trường
## Lập Trình Smart Constract
### Soilidity
### Mortal contract


